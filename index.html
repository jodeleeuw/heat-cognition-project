<!DOCTYPE html>
<html>

<head>
    <title>jsPsychTimelineStroopTimeline Example</title>
    <script src="https://unpkg.com/jspsych"></script>
    <script src="jatos.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/jspsych/css/jspsych.css">
    <link rel="stylesheet" href="style.css">
</head>

<body></body>

<!-- Note the type="module" attribute -->
<script type="module">
    // Import from your local dist file
    import { createTimeline } from '../timelines/stroop-task.js';

    const taskConfig = {
        practice_trials_per_condition: 2,      // Number of practice trials per condition
        congruent_main_trials: 4,             // Number of congruent main trials per condition
        incongruent_main_trials: 4,           // Number of incongruent main trials per condition
        trial_timeout: 3000,                  // Time limit for each trial (milliseconds)
        fixation_duration: {                  // Fixation cross duration range
            min: 300,                         // Minimum duration (milliseconds)
            max: 1500                         // Maximum duration (milliseconds)
        },
        show_practice_feedback: true,         // Show feedback during practice trials
        include_fixation: true,               // Include fixation cross before trials
        show_welcome_and_instructions: true,  // Show welcome message and instructions (fixed the parameter name)
        show_results: true,                   // Show results at the end
        randomise_main_trial_condition_order: true,      // Randomise the order of conditions
        randomise_practice_trial_condition_order: false, // Randomise the order of conditions in practice trials
        randomise_fixation_duration: true,    // Randomise fixation duration between min/max
        number_of_rows: 2,                    // Number of rows in the display grid
        number_of_columns: 2,                 // Number of columns in the display grid
        choice_of_colors: [                   // Array of colors to use
            'red',
            'blue',
            'green',
            'yellow'
        ]
    };

    // Initialize jsPsych (fixed the syntax)
    const jsPsych = initJsPsych();

    // Create the timeline using the imported function
    const timeline = createTimeline(jsPsych, taskConfig);

    // Run with JATOS
    jatos.onLoad(() => {
        jsPsych.run([timeline]); // Note: wrapped timeline in array
    });
</script>

</html>