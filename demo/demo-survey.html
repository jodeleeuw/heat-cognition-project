<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HotCog Demo</title>
    
    <script src="https://unpkg.com/jspsych@8"></script>
    
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@2.1.0"></script>
    <script src="https://unpkg.com/@jspsych-contrib/plugin-survey-slider"></script>
    <link rel="stylesheet" href="https://unpkg.com/jspsych@8.2.2/css/jspsych.css" />
    <script src="https://unpkg.com/@jspsych/plugin-survey@3.0.0"></script>
    <link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@3.0.0/css/survey.min.css">
    <script src="/plugin-survey-vert-slider.js"></script>
    <script src="/plugin-survey-svo.js"></script>
    <style>
        .hotcog-containers {
            padding: 16px;
        }
    </style>
</head>
<body>
    <script>
        const jsPsych = initJsPsych({
            on_finish: function() {
                jsPsych.data.displayData();
            }
        });

        let timeline = [];

        const who5_scale = ["none of the time", "some of the time", "less than half of the time", "more than half of the time", "most of the time", "all of the time"];
        const who5_questions = [
            { prompt: "I have felt cheerful and in good spirits", name: "A-WHO1", labels: who5_scale, required: true },
            { prompt: "I have felt calm and relaxed", name: "A-WHO2", labels: who5_scale, required: true },
            { prompt: "I have felt active and vigorous", name: "A-WHO3", labels: who5_scale, required: true },
            { prompt: "I woke up feeling fresh and rested", name: "A-WHO4", labels: who5_scale, required: true },
            { prompt: "My daily life has been filled with things that interest me", name: "A-WHO5", labels: who5_scale, required: true }
        ]
        const who5_trial = {
            type: jsPsychSurveyLikert,
            questions: who5_questions,
            preamble: "Please indicate how you have been feeling over the <b>last 2-3 days</b>.",
            css_classes: ['hotcog-containers']
        }
        timeline.push(who5_trial);

        const phq4_scale = ["none of the time", "rarely", "sometimes", "often", "all the time"];
        const phq4_questions = [
            { prompt: "Feeling nervous, anxious or on edge", name: "A-PHQ1", labels: phq4_scale, required: true },
            { prompt: "Not being able to stop or control worrying", name: "A-PHQ2", labels: phq4_scale, required: true },
            { prompt: "Feeling down, depressed or hopeless", name: "A-PHQ3", labels: phq4_scale, required: true },
            { prompt: "Little interest or pleasure in doing things", name: "A-PHQ4", labels: phq4_scale, required: true }
        ]
        const phq4_trial = {
            type: jsPsychSurveyLikert,
            questions: phq4_questions,
            preamble: "Over the <b>last 2-3 days</b>, how often have you been <b>bothered</b> by the following problems?",
            css_classes: ['hotcog-containers']
        }
        timeline.push(phq4_trial);

        const vams_questions = [
            { prompt: "Happy", name: "M-VA1", labels: ["not at all", "extremely"], min: 0, max: 100, step: 1, slider_start: 0 },
            { prompt: "Sad", name: "M-VA2", labels: ["not at all", "extremely"], min: 0, max: 100, step: 1, slider_start: 0 },
            { prompt: "Calm", name: "M-VA3", labels: ["not at all", "extremely"], min: 0, max: 100, step: 1, slider_start: 0 },
            { prompt: "Tense", name: "M-VAMS4", labels: ["not at all", "extremely"], min: 0, max: 100, step: 1, slider_start: 0 },
            { prompt: "Energetic", name: "M-VA5", labels: ["not at all", "extremely"], min: 0, max: 100, step: 1, slider_start: 0 },
            { prompt: "Sleepy", name: "M-VA6", labels: ["not at all", "extremely"], min: 0, max: 100, step: 1, slider_start: 0 },
        ]
        const vams_trial = {
            type: jsPsychSurveyVertSlider,
            questions: vams_questions,
            preamble: "Click on the answer that bests represents how you feel <b>right now</b>.",
            css_classes: ['hotcog-containers']
        }
        timeline.push(vams_trial);

        const bpaq_scale = ["very unlike me", "", "", "", "very like me"];
        const bpaq_questions = [
            { prompt: "I could have hit someone if sufficiently provoked", name: "M-BP1", labels: bpaq_scale, required: true },
            { prompt: "I have found myself often disagreeing with people.", name: "M-BP3", labels: bpaq_scale, required: true },
            { prompt: "I could not help getting into arguments when people disagreed with me.", name: "M-BP4", labels: bpaq_scale, required: true },
            { prompt: "I have had angry outbursts for no good reason.", name: "M-BP5", labels: bpaq_scale, required: true },
            { prompt: "I felt like other people have had it easier than me.", name: "M-BP6", labels: bpaq_scale, required: true },
            { prompt: "I have had trouble controlling my temper.", name: "M-BP7", labels: bpaq_scale, required: true },
            { prompt: "I have felt bitter about things.", name: "M-BP8", labels: bpaq_scale, required: true },
            { prompt: "I have felt on the verge of an angry outburst.", name: "M-BP9", labels: bpaq_scale, required: true },
        ];
        const bpaq_trial = {
            type: jsPsychSurveyLikert,
            questions: bpaq_questions,
            preamble: "Please rate how much each of the following statements <b>describes you over the last 2-3 days</b>.",
            css_classes: ['hotcog-containers']
        }
        timeline.push(bpaq_trial);

        const ac_scale = ["none of the time", "rarely", "sometimes", "often", "all of time"];
        const ac_questions = [
            { prompt: "It has been very hard for me to concentrate on the difficult tasks.", name: "M-AC1", labels: ac_scale, required: true },
            { prompt: "When I needed to concentrate and solve a problem, I have had trouble focusing my attention.", name: "M-AC2", labels: ac_scale, required: true },
            { prompt: "When I tried focusing my attention on something, I have had difficulty blocking out distracting thoughts.", name: "M-AC3", labels: ac_scale, required: true },
            { prompt: "It has been difficult to switch from one task to another.", name: "M-AC4", labels: ac_scale, required: true },
        ]
        const ac_trial = {
            type: jsPsychSurveyLikert,
            questions: ac_questions,
            preamble: "Over <b>the last 2-3 days</b>, how often have you been <b>bothered</b> by the following?",
            css_classes: ['hotcog-containers']
        }
        timeline.push(ac_trial);

        const svo_questions = [
            {
                self_values: [85, 85, 85, 85, 85, 85, 85, 85, 85],
                other_values: [85, 76, 68, 59, 50, 41, 33, 24, 15],
                self_label: "You receive",
                other_label: "Other receives",
                name: "M-SVOT1",
            }, 
            {
                self_values: [85, 87, 89, 91, 93, 94, 96, 98, 100],
                other_values: [15, 19, 24, 28, 33, 37, 41, 46, 50],
                self_label: "You receive",
                other_label: "Other receives",
                name: "M-SVOT2",
            },
            {
                self_values: [50, 54, 59, 63, 68, 72, 76, 81, 85],
                other_values: [100, 98, 96, 94, 93, 91, 89, 87, 85],
                self_label: "You receive",
                other_label: "Other receives",
                name: "M-SVOT3",
            },
            {
                self_values: [50, 54, 59, 63, 68, 72, 76, 81, 85],
                other_values: [100, 89, 79, 68, 58, 47, 36, 26, 15],
                self_label: "You receive",
                other_label: "Other receives",
                name: "M-SVOT4",
            },
            {
                self_values: [100, 94, 88, 81, 75, 69, 63, 56, 50],
                other_values: [50, 56, 63, 69, 75, 81, 88, 94, 100],
                self_label: "You receive",
                other_label: "Other receives",
                name: "M-SVOT5",
            },
            {
                self_values: [100, 98, 96, 94, 93, 91, 89, 87, 85],
                other_values: [50, 54, 59, 63, 68, 72, 76, 81, 85],
                self_label: "You receive",
                other_label: "Other receives",
                name: "M-SVOT6",
            }
        ]
        const svo_trial = {
            type: jsPsychSurveySvo,
            questions: svo_questions,
            preamble: `
In this set of questions, we ask you to imagine that you have been randomly 
paired with <b>another person</b>, whom we will refer to simply as the “<b>other</b>.” You 
will be making a series of decisions <b>about allocating finances between you
and this other person.</b><br>
For each of the following questions, please indicate the distribution you would 
prefer. You can only make one mark for each question (each row).<br>
Please imagine that your decisions will yield money for both yourself and the 
other person`,
            require_selection: true,
            button_label: "Submit",
            css_classes: ['hotcog-containers']
        };
        timeline.push(svo_trial);


        const tic_scale = ["not at all", "a little", "sometimes", "quite a bit", "very much"];
        const tic_questions = [
            { prompt: "the government in the country you're currently based in?", name: "A-TIC1", labels: tic_scale, required: true },
            { prompt: "scientific institutions?", name: "A-TIC2", labels: tic_scale, required: true },
            { prompt: "climate scientists?", name: "A-TIC3", labels: tic_scale, required: true },
            { prompt: "people from other cultures?", name: "A-TIC4", labels: tic_scale, required: true },
            { prompt: "people from your country?", name: "A-TIC5", labels: tic_scale, required: true },
            { prompt: "people in your neighborhood?", name: "A-TIC6", labels: tic_scale, required: true }
        ]
        const tic_trial = {
            type: jsPsychSurveyLikert,
            questions: tic_questions,
            preamble: "Using a scale from 1 to 5, where 1 means 'no trust at all' and 5 means 'complete trust', <b>how much do you personally trust...</b>",
            css_classes: ['hotcog-containers']
        }
        timeline.push(tic_trial);

        const cce_scale = ["not at all", "a little", "moderately", "quite a bit", "very much:"];
        const cce_questions = [
            { prompt: "concerned", name: "M-CCE1", labels: cce_scale, required: true },
            { prompt: "tense", name: "M-CCE2", labels: cce_scale, required: true },
            { prompt: "worried", name: "M-CCE3", labels: cce_scale, required: true },
            { prompt: "anxious", name: "M-CCE4", labels: cce_scale, required: true },
            { prompt: "depressed", name: "M-CCE5", labels: cce_scale, required: true },
            { prompt: "hopeless", name: "M-CCE6", labels: cce_scale, required: true },
            { prompt: "powerless", name: "M-CCE7", labels: cce_scale, required: true },
            { prompt: "sad", name: "M-CCE8", labels: cce_scale, required: true },
            { prompt: "helpless", name: "M-CCE9", labels: cce_scale, required: true },
            { prompt: "hopeful", name: "M-CCE10", labels: cce_scale, required: true },
            { prompt: "frustrated", name: "M-CCE11", labels: cce_scale, required: true },
            { prompt: "angry", name: "M-CCE12", labels: cce_scale, required: true },
            { prompt: "indifferent", name: "M-CCE13", labels: cce_scale, required: true }
        ]
        const cce_trial = {
            type: jsPsychSurveyLikert,
            questions: cce_questions,
            preamble: "<b>Right now, thinking about climate change</b> makes me feel...",
            css_classes: ['hotcog-containers']
        }
        timeline.push(cce_trial);

        const ccj_scale = ["strongly disagree", "somewhat disagree", "neither agree nor disagree", "somewhat agree", "strongly agree"];
        const ccj_questions = [
            { prompt: "People living in poverty suffer worse effects from climate change.", name: "M-CCJ1", labels: ccj_scale, required: true },
            { prompt: "Around the world, people who are least responsible for causing climate change suffer the most severe climate change impacts.", name: "M-CCJ2", labels: ccj_scale, required: true },
            { prompt: "Climate change affects women worse than men around the world.", name: "M-CCJ3", labels: ccj_scale, required: true },
            { prompt: "Climate change will worsen existing oppressions and inequalities (for example, the gap between rich and poor countries).", name: "M-CCJ4", labels: ccj_scale, required: true },
            { prompt: "Solving climate change requires redistributing resources from the wealthy to those who have less.", name: "M-CCJ5", labels: ccj_scale, required: true },
            { prompt: "People from communities most affected by climate change should have more of a say in decisions about solutions to climate change than they currently do", name: "M-CCJ6", labels: ccj_scale, required: true }
        ]
        const ccj_trial = {
            type: jsPsychSurveyLikert,
            questions: ccj_questions,
            preamble: "The following statements relate to <b>social and global inequalities</b> in the context of climate change. Please indicate <b>how much you agree or disagree</b> with each statement.",
            css_classes: ['hotcog-containers']
        }
        timeline.push(ccj_trial);

        const cca_scale = ["not at all", "a little", "moderately", "quite a bit", "very much"];
        const cca_questions = [
            { prompt: "Floods", name: "M-CCA1", labels: cca_scale, required: true },
            { prompt: "Heatwaves", name: "M-CCA2", labels: cca_scale, required: true },
            { prompt: "Heavy rains", name: "M-CCA3", labels: cca_scale, required: true },
            { prompt: "Hurricanes", name: "M-CCA4", labels: cca_scale, required: true },
            { prompt: "Droughts", name: "M-CCA5", labels: cca_scale, required: true },
            { prompt: "Extremely cold days", name: "M-CCA6", labels: cca_scale, required: true },
            { prompt: "Wildfires", name: "M-CCA7", labels: cca_scale, required: true }
        ]
        const cca_trial = {
            type: jsPsychSurveyLikert,
            questions: cca_questions,
            preamble: "To what extent do you think climate change has changed the frequency and/or severity of the following weather events?",
            css_classes: ['hotcog-containers']
        }
        timeline.push(cca_trial);

        const ccb_scale = ["not at all", "", "", "", "extremely accurate"];
        const ccb_questions = [
            { prompt: "Taking action to fight climate change is necessary to avoid a global catastrophe.", name: "M-CCB1", labels: ccb_scale, required: true },
            { prompt: "Human activities are causing climate change.", name: "M-CCB2", labels: ccb_scale, required: true },
            { prompt: "Climate change poses a serious threat to humanity.", name: "M-CCB3", labels: ccb_scale, required: true },
            { prompt: "Climate change is a global emergency.", name: "M-CCB4", labels: ccb_scale, required: true }
        ]
        const ccb_trial = {
            type: jsPsychSurveyLikert,
            questions: ccb_questions,
            preamble: "How accurate do you think these statements are?",
            css_classes: ['hotcog-containers']
        }
        timeline.push(ccb_trial);

        const ts_questions = [
            {
                prompt: "How do you feel right now?",
                name: "A-TS1",
                labels: ["cold", "cool", "slightly cool", "neutral (your ideal temperature)", "slightly warm", "warm", "hot"],
                required: true,
            },
            {
                prompt: "How satisfied are you with the thermal environment right now?",
                name: "A-TS2",
                labels: ["very dissatisfied", "dissatisfied", "slightly dissatisfied", "neutral", "slightly satisfied", "satisfied", "very satisfied"],
                required: true,
            }
        ]
        const ts_trial = {
            type: jsPsychSurveyLikert,
            questions: ts_questions,
            css_classes: ['hotcog-containers']
        }
        timeline.push(ts_trial);

        const sta_scale = ["not at all", "a little", "moderately", "quite a bit", "very much"];
        const sta_questions = [
            { prompt: "Your ability to concentrate", name: "A-STA1", labels: sta_scale, required: true },
            { prompt: "Your memory", name: "A-STA2", labels: sta_scale, required: true },
            { prompt: "Your mood", name: "A-STA3", labels: sta_scale, required: true },
            { prompt: "Your quality of sleep", name: "A-STA4", labels: sta_scale, required: true },
            { prompt: "Your overall health", name: "A-STA5", labels: sta_scale, required: true },
            { prompt: "Your well-being", name: "A-STA6", labels: sta_scale, required: true },
            { prompt: "The well-being of your friends and family", name: "A-STA7", labels: sta_scale, required: true }
        ]
        const sta_trial = {
            type: jsPsychSurveyLikert,
            questions: sta_questions,
            preamble: "How much have the <b>temperatures</b> you experienced over <b>the last 2-3 days affected</b>:",
            css_classes: ['hotcog-containers']
        }
        timeline.push(sta_trial);
        
        const sl_scale = ["strongly disagree", "somewhat disagree", "neither agree nor disagree", "somewhat agree", "strongly agree"];
        const sl_questions = [
            { prompt: "My sleep quality over the past 2-3 days has been bad.", name: "A-SL1", labels: sl_scale, required: true },
            { prompt: "I feel that I have not gotten enough sleep over the last 2-3 days.", name: "A-SL2", labels: sl_scale, required: true },
            { prompt: "I have had difficulties sleeping because I was feeling too hot.", name: "A-SL3", labels: sl_scale, required: true },
            { prompt: "I have had difficulties sleeping for some other reason.", name: "A-SL4", labels: sl_scale, required: true }
        ]
        const sl_trial = {
            type: jsPsychSurveyLikert,
            questions: sl_questions,
            preamble: "The next questions are <b>about your sleep</b> in the <b>last 2-3 days</b>. How much do you agree with the following statements?",
            css_classes: ['hotcog-containers']
        }
        timeline.push(sl_trial);

        const de_json = {
            elements: [{
                name: "A-DE1",
                type: "text",
                title: "What is your age?",
                inputType: "number",
                min: 18,
                max: 100,
                defaultValue: 0,
                isRequired: true
            }, {
                name: "A-DE2",
                type: "radiogroup",
                title: "What is your gender?",
                isRequired: true,
                choices: ["Female", "Male", "Non-binary/Other", "Prefer not to say"],
                colCount: 1,
            }, {
                name: "A-DE6",
                type: "radiogroup",
                title: "How many years of formal education have you completed? Please select the one that is closest to your level of education.",
                isRequired: true,
                choices: [
                    "0-6 (Up to grade school/elementary school)", 
                    "7-12 (Up to high school)", 
                    "13-16 (College/undergraduate university/certificate training)", 
                    "17+ (doctorate degree, medical degree, etc.)"
                ],
                colCount: 1
            }, {
                type: "html",
                html: "What is your <b>political orientation</b> for the issues listed below?<br>Please note, by 'liberal' we mean classically left-wing, and by 'conservative', we mean classically right-wing."
            }, {
                name: "A-DE7",
                type: "slider",
                title: "For social issues (e.g., health care, education, etc.)",
                min: 0,
                max: 100,
                step: 1,
                defaultValue: 50,
                customLabels: [
                    { value: 0, label: "Extremely liberal/left-wing" },
                    { value: 50, label: "Moderate" },
                    { value: 100, label: "Extremely conservative/right-wing" }
                ]
            }, {
                name: "A-DE7a",
                type: "checkbox", 
                title: " ",
                choices: ["Prefer not to say"],
            }, {
                name: "A-DE8",
                type: "slider",
                title: "For economic issues (e.g., taxes)",
                min: 0,
                max: 100,
                step: 1,
                defaultValue: 50,
                customLabels: [
                    { value: 0, label: "Extremely liberal/left-wing" },
                    { value: 50, label: "Moderate" },
                    { value: 100, label: "Extremely conservative/right-wing" }
                ]
            }, {
                name: "A-DE8a",
                type: "checkbox",
                title: " ", 
                choices: ["Prefer not to say"],
            },{
                name: "Comments Box",
                type: "comment",
                title: "Do you have any comments for this survey?"
            }
        ]};
        const de_trial = {
            type: jsPsychSurvey,
            survey_json: de_json,
            button_label: "Submit and finish",
            on_finish: function (data) {
                if (data.response["A-DE7a"] && data.response["A-DE7a"].includes("Prefer not to say")) {
                    data.response["A-DE7"] = -99;
                    delete data.response["A-DE7a"];
                }
                if (data.response["A-DE8a"] && data.response["A-DE8a"].includes("Prefer not to say")) {
                    data.response["A-DE8"] = -99;
                    delete data.response["A-DE8a"];
                }
            }
        };
        timeline.push(de_trial);

        jsPsych.run(timeline);
    </script>
</body>
</html>
