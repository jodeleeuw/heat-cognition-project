<!DOCTYPE html>
<html>

<head>
    <title>Columbia Card Task</title>
    <script src="jspsych/dist/jspsych.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="jspsych/dist/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/dist/plugin-html-button-response.js"></script>
    <script src="jspsych/dist/plugin-instructions.js"></script>
    <script src="tasks/columbia-card-task-timeline.js"></script>
    <script src="text/columbia-card-task-text.js"></script>
    <script src="jatos.js"></script>
    <link rel="stylesheet" href="jspsych/dist/jspsych.css">
    <link rel="stylesheet" href="css/styles.css">
    <!-- <link rel="stylesheet" href="css/columbia-card-styles.css"> -->
</head>

<body></body>
<script>
    // Initialize jsPsych
    const jsPsych = initJsPsych({
        on_finish: () => jatos.startComponentByTitle(jatos.studySessionData.trial_list.shift()), // Start next task
    });
    const mainTimeline = [];

    // Create instructions
    const instructions = jsPsychTimelineColumbiaCardTask.createInstructions(ColumbiaCardTaskText);

    // Create main timeline with custom parameters
    const cardTaskTimeline = jsPsychTimelineColumbiaCardTask.createTimeline(jsPsych, {
        n_cards: 16,
        cols: 4,
        rounds: [
            { loss_cards: 1, gain_amount: 10, loss_amount: 250 },
            { loss_cards: 1, gain_amount: 10, loss_amount: 250 },
            // { loss_cards: 1, gain_amount: 10, loss_amount: 250 },
            // { loss_cards: 1, gain_amount: 10, loss_amount: 250 },
            // { loss_cards: 1, gain_amount: 10, loss_amount: 250 },
            // { loss_cards: 1, gain_amount: 10, loss_amount: 250 },
            // { loss_cards: 1, gain_amount: 10, loss_amount: 250 },
            // { loss_cards: 1, gain_amount: 10, loss_amount: 250 }
        ],
        show_instructions: false,  // Already added separately
        show_results: true,
        enable_tts: false,
        text: ColumbiaCardTaskText  // Pass the text object
    });

    mainTimeline.push(instructions);
    mainTimeline.push(cardTaskTimeline);

    jatos.onLoad(() => {
        jsPsych.run(mainTimeline);
    });


</script>

</html>